# FantasyPlayerEvaluation

This repository is broken up into different projects each of which is described briefly below:

## LeagueHistoryLinearWeightsModel
Contained within this directory is a main.py python script which is designed for fantasy baseball analysis of p[layer contributions, particularly tailored to my Head-to-Head (H2H) Each Category scoring league.  The main execution block of the script revolves around leveraging historical league data, stored in an Excel file named "team_stats.xlsx," to predict team performance based on various statistical categories. The data preprocessing phase involves standardizing the end of season team totals for each category and transforming them using z-score normalization, essential for ensuring uniformity across different statistical metrics, such as runs, home runs, RBIs, rate stats (OBP, SLUG, ERA, etc.) that have varying scales. Through the utilization of machine learning techniques, particularly PolynomialFeatures and Ridge Regression, the script constructs a predictive model optimized for mean squared error, that attempts to learn the weights of each category's contribution to overall team points, where points was an arbitrarily assigned metric of two points for a win and one point for a tie in order to represent the output label numerically.  Subsequently, individual player projections (or rest of season stats) are read in, and z-scores are again produced against the player pool for each player's statistical categories. The model coefficients learned from the team data are then applied to these z-scored player statistics to predict team points based on the individual contributions of each player to their respective categories. This comprehensive approach attempts to streamline the the analysis of the true importance of each categories impact into overall team performance, and to provide easier comparison of category to category contibutions along with player's actual production for the specific league inwhich I play.  In a sense, it is a hybrid of two popular valuation systems used by Fantasy Baseball practicioners, which are Standing Gain Points SGP) and simply the sum of z-scores for each category.  The following articles provide further information for those unfamiliar with the aforementioned mainstream valuation systems: z-score: https://fantasy.fangraphs.com/using-the-auction-calculator-in-2022-a-beginners-guide/ SGP: https://www.smartfantasybaseball.com/create-your-own-rankings/

#### Data Preparation:
The historical league data from "team_stats.xlsx" contains statistics of various teams across different seasons. These statistics include metrics such as runs, home runs, RBIs, stolen bases, on-base percentage (OBP), slugging percentage (SLG), strikeouts (K), quality starts (QS), saves plus holds (SV+HLDs), earned run average (ERA), walks plus hits per inning pitched (WHIP), strikeouts to walk ratio (K/BB), and losses (L) (Used for one seaon and provides noise either way so figured I would include it for that season until I get more seasons with the updated set of 12 categories).
To ensure uniformity across these metrics, z-score normalization is applied, transforming each statistic into a dimensionless value representing its deviation from the mean in terms of standard deviations where each mean and std dev are taken across team stats within a given season.  This is done to ensure changes in run environment and other MLB specific changes don't distort the data by introducing different scales for different seasons which could cause bias by overemphasizing the larger scaled seasons' data.

#### Model Construction:
A predictive model is constructed using PolynomialFeatures and Ridge Regression. PolynomialFeatures generates polynomial and interaction features, allowing the model to capture potential nonlinear relationships between input features. Ridge Regression introduces regularization to the linear regression model, preventing overfitting by penalizing large coefficients.
The target variable for the model is the total points earned by each team in the fantasy league. Points are awarded based on the outcome of matchups, with wins yielding 2 points and ties yielding 1 point.

#### Training the Model:
The constructed model is trained on the z-score normalized team statistics, with the target variable being the total points earned by each team. This training phase involves optimizing the model's parameters, including the degree of polynomial features and the regularization strength, through GridSearchCV.

#### Learning Coefficients:
Once the model is trained, the coefficients associated with each feature (category z-score) are learned. These coefficients represent the relative importance or contribution of each statistical category to the overall team performance in terms of points.

#### Predicting Team Points:
To predict the points earned by a team, the z-scores of statistical categories for that team are calculated and multiplied by the corresponding coefficients learned from the model. This process effectively assigns a weighted value to each category based on its impact on team performance.
These weighted z-scores are then aggregated to obtain a predicted point value for the team. This prediction reflects the team's expected performance in the fantasy league based on its statistical profile.

#### Player Point Assignment:
Similarly, player projections are processed to derive z-scores for each statistical category. These z-scores represent the performance of individual players relative to the league average in each category.
The coefficients learned from the team model are then applied to these player z-scores. By multiplying each player's z-score by the corresponding coefficient for the respective category, a point value is assigned to the player based on their expected contribution to team performance in that category.
